# Twenty CRM - Railway Environment Variables
# Copy these to your Railway service environment settings

# ===========================================
# DATABASE - SUPABASE (Required)
# ===========================================
# Option 1: Use Railway's Supabase service variable reference:
# PG_DATABASE_URL=${{Supabase.DATABASE_URL}}
#
# Option 2: Direct Supabase connection string (from Supabase Dashboard):
# Use pooler connection for better performance (port 6543)
# PG_DATABASE_URL=postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres
#
# Option 3: Direct connection (port 5432) if pooler isn't available:
# PG_DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
PG_DATABASE_URL=postgresql://postgres:password@host:5432/postgres

# Allow self-signed SSL certificates (required for some Supabase connections)
PG_SSL_ALLOW_SELF_SIGNED=true

# ===========================================
# REDIS (Required)
# ===========================================
# Option 1: Use Railway's Redis service variable reference:
# REDIS_URL=${{Redis.REDIS_URL}}
#
# Option 2: Use internal networking (recommended for performance):
# REDIS_URL=redis://${{Redis.RAILWAY_PRIVATE_DOMAIN}}:6379
#
# Option 3: Direct URL:
REDIS_URL=redis://host:6379

# Redis cache settings
CACHE_STORAGE_TYPE=redis
CACHE_STORAGE_TTL=3600

# ===========================================
# APPLICATION (Required)
# ===========================================
# Generate with: openssl rand -hex 32
APP_SECRET=your-secret-key-here

# Your Railway domain (get from Railway dashboard after first deploy)
SERVER_URL=https://your-app.up.railway.app

# Frontend URL (same as SERVER_URL for single-service deployment)
FRONTEND_URL=https://your-app.up.railway.app

# Server port (Railway assigns automatically, but Twenty needs this)
NODE_PORT=3000
PORT=3000

# ===========================================
# WORKER ONLY (Set only on worker service)
# ===========================================
# These are already set in Dockerfile.worker, but can be overridden:
# DISABLE_DB_MIGRATIONS=true
# DISABLE_CRON_JOBS_REGISTRATION=true

# ===========================================
# STORAGE - MINIO S3 (Required for file uploads)
# ===========================================
STORAGE_TYPE=s3

# Bucket name (create this in Minio console first)
STORAGE_S3_NAME=twenty

# Region (can be any value for Minio, but required)
STORAGE_S3_REGION=us-east-1

# Minio endpoint using Railway internal networking:
# STORAGE_S3_ENDPOINT=http://${{Minio.RAILWAY_PRIVATE_DOMAIN}}:9000
#
# Or public endpoint if needed:
STORAGE_S3_ENDPOINT=http://minio-host:9000

# Minio credentials (use Railway variable references):
# STORAGE_S3_ACCESS_KEY_ID=${{Minio.MINIO_ROOT_USER}}
# STORAGE_S3_SECRET_ACCESS_KEY=${{Minio.MINIO_ROOT_PASSWORD}}
STORAGE_S3_ACCESS_KEY_ID=minioadmin
STORAGE_S3_SECRET_ACCESS_KEY=your-secure-password

# ===========================================
# MINIO SERVICE CONFIGURATION
# ===========================================
# Set these on your Minio service in Railway:
# MINIO_ROOT_USER=minioadmin
# MINIO_ROOT_PASSWORD=your-secure-password
#
# Minio start command (set in Railway service settings):
# server /data --console-address ":9001"

# ===========================================
# GOOGLE AUTH (Optional)
# ===========================================
# MESSAGING_PROVIDER_GMAIL_ENABLED=true
# CALENDAR_PROVIDER_GOOGLE_ENABLED=true
# AUTH_GOOGLE_CLIENT_ID=your-client-id
# AUTH_GOOGLE_CLIENT_SECRET=your-client-secret
# AUTH_GOOGLE_CALLBACK_URL=https://your-app.up.railway.app/auth/google/redirect
# AUTH_GOOGLE_APIS_CALLBACK_URL=https://your-app.up.railway.app/auth/google-apis/get-access-token

# ===========================================
# MICROSOFT AUTH (Optional)
# ===========================================
# CALENDAR_PROVIDER_MICROSOFT_ENABLED=true
# MESSAGING_PROVIDER_MICROSOFT_ENABLED=true
# AUTH_MICROSOFT_ENABLED=true
# AUTH_MICROSOFT_CLIENT_ID=your-client-id
# AUTH_MICROSOFT_CLIENT_SECRET=your-client-secret
# AUTH_MICROSOFT_CALLBACK_URL=https://your-app.up.railway.app/auth/microsoft/redirect
# AUTH_MICROSOFT_APIS_CALLBACK_URL=https://your-app.up.railway.app/auth/microsoft-apis/get-access-token

# ===========================================
# EMAIL (Optional)
# ===========================================
# EMAIL_FROM_ADDRESS=contact@yourdomain.com
# EMAIL_FROM_NAME=Your Name
# EMAIL_SYSTEM_ADDRESS=system@yourdomain.com
# EMAIL_DRIVER=smtp
# EMAIL_SMTP_HOST=smtp.gmail.com
# EMAIL_SMTP_PORT=465
# EMAIL_SMTP_USER=your-email
# EMAIL_SMTP_PASSWORD=your-password
